# nextJs

# Learn Next.js

## 실행방법
npm run dev

## Tailwind
새 프젝 시작 시 Next.js Tailwind 사용할 건지 물어봄 그때 yes 하면 자동으로 필요한 패키지 설치 및 애플리케이션에 Tailwind 구성

## css 모듈
각 구성요소에 대해 고유한 클래스 이름을 생성하므로 스타일 충돌에 대해 걱정할 필요 없다

## clsx
클래스 이름을 쉽게 전환할 수 있는 라이브러리

## 글꼴
Next.js는 빌드 시 글꼴 파일을 다운로드하고 이를 다른 정적 자산과 함께 호스팅한다. 

사용자가 애플리케이션을 방문할 때 성능에 영향을 미칠 수 있는 글꼴에 대한 추가 네트워크 요청이 없음을 의미

## 루트 레이아웃
루트 레이아웃에 추가하는 모든 UI는 애플리케이션의 모든 페이지에서 공유 됨

루트 레이아웃을 사용하여 <html> 및 <boby> 태그를 수정하고 메타데이터를 추가 가능

고유한 레이아웃은 루트 레이아웃에 UI 추가할 이유 없음

## Next.js에서 레이아웃 파일
레이아웃파일의 목적은 애플리케이션의 모든 페이지에서 사용할 수 있는 공유 레이아웃을 만드는 가장 좋은 방법

## <Link> Link 태그
브라우저의 뷰포트에 나타날 때마다 Next.js는 백그라운드에서 연결된 경로에 대한 코드를 자동으로 미리 가져옴

사용자가 링크를 클릭하면 대상 페이지의 코드가 이미 백그라운드에 로드되어 페이지 전환이 거의 즉각적으로 이루어짐

## usePathname
현재 URL의 경로 이름을 읽을 수 있는 클라이언트 구성 요소 후크 및 현재의 URL의 경로 이름 문자열을 반환

'use client'
 
import { usePathname } from 'next/navigation'
 
export default function ExampleClientComponent() {
  const pathname = usePathname()
  return <p>Current pathname: {pathname}</p>
}

## 데이터베이스
클라이언트에서 데이터를 가져올 때 데이터베이스에 직접 쿼리하면 데이터베이스 비밀 노출됨

서버 구성요소 사용하여 데이터베이스 가져오기

Promise 지원하여 데이터 가져오기와 같은 비동기 작업을 위한 더 간단한 솔루션 제공

useEffect, useState 또는 데이터 가져오기 라이브러리에 손을 대지 않고 비동기/대기(async/await) 구문을 사용

서버 구성요소는 서버에서 실행되므로 값비싼 데이터 가져오기 및 로직을 서버에 유지하고 결과만 클라이언트로 보낼 수 있다.

서버 구성요소는 서버에서 실행되므로 추가 API 계층 없이 데이터베이스를 직접 조회 가능

서버 구성요소 사용하면 데이터베이스에서 직접 데이터를 가져올 수 있다.

### async/await
콜백, Promise 체인의 단점은 async와 await로 보완

함수를 정의할 때 async를 함수 앞에 붙이면, “이 함수는 비동기적인 함수이고 Promise를 반환한다”라고 선언

반환 값이 Promise 생성 함수가 아니어도 반환되는 값을 Promise 객체에 넣는다.

await는 async 함수 안에만 사용할 수 있는 특별한 문법,

Promise를 반환하는 함수 앞에 await를 붙이면, 해당 Promise의 상태가 바뀔 때까지 코드가 기다림.

Promise가 성공 상태 또는 실패 상태로 바뀌기 전까지는 다음 연산을 시작하지 않는다

## 요청 폭포수?
폭포수는 이전 요청의 완료에 따라 달라지는 일련의 네트워크 요청을 나타낸다.

데이터 가져오기의 경우 각 요청은 이전 요청이 데이터를 반환한 후에만 시작 가능

다음 요청을 하기 전에 조건을 충족하려 하면 폭포수 패턴 사용

EX) 사용자 ID 와 프로필 정보를 먼저 가져오고 싶을 수 있다. ID가 있으면 친구 목록을 가져올 수 있다.

## 병렬테이터 가져오기
폭포수 방지하는 일반적인 방법

JavaScript에서 Promise.all() 또는 Promise.allSettled() 함수를 사용하여 모든 약속을 동시에 시작 가능

## 스트리밍
경로를 더 작은 "chunks" 로 분해하고 준비가 되면 서버에서 클라이언트로 점진적으로 스트리밍할 수 있는 데이터 전송 기술

스트리밍하면 느린 데이터 요청이 전체 페이지를 차단하는 것을 방지할 수 있다. 

이를 통해 사용자는 UI가 사용자에게 표시되기 전에 모든 데이터가 로드될 때까지 기다리지 않고 페이지의 일부를 보고 상호작용 가능

Next.js 스트리밍 구현 방법
1. 페이지 수준에서 loading.tsx 파일 사용
2. 특정 구성 요소의 경우 <Suspense> Suspense 태그.
